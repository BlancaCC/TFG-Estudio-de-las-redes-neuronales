% pazofnst.tex
% (part of the mathpazo package, by Diego Puga)
%
% Fontinst script
% to create virtual math fonts suitable for Palatino
% using the Pazo fonts
% Builds on a fontinst script by Walter Schmidt for the mathpple package
%
\input fontinst.sty
%
\needsfontinstversion{1.914}
%
% Font transformations
% Adobe Palatino
\recordtransforms{mapppl.tex}
\transformfont{pplr8r}{\reencodefont{8r}{\fromafm{pplr8a}}}
\transformfont{pplri8r}{\reencodefont{8r}{\fromafm{pplri8a}}}
\transformfont{pplb8r}{\reencodefont{8r}{\fromafm{pplb8a}}}
\transformfont{pplbi8r}{\reencodefont{8r}{\fromafm{pplbi8a}}}
\endrecordtransforms
% Pazo
\recordtransforms{mapfplm.tex}
\fromafm{fplmr}
\fromafm{fplmri}
\fromafm{fplmb}
\fromafm{fplmbi}
\fromafm{fplmbb}
\endrecordtransforms
%
% Virtual math fonts for Palatino: zplm
\recordtransforms{mapzplm.tex}
\installfonts
% Make math less tight:
\setint{letterspacing}{25}
% Install operators, letters, symbols, and large symbols
\installfamily{OT1}{zplm}{}
\installfamily{OML}{zplm}{\skewchar\font=127}
\installfamily{OMS}{zplm}{\skewchar\font=48}
\installfamily{OMX}{zplm}{}
% The `operators' font:
%		latin from Palatino Roman
%		greek and dotless j from Pazo
%		+ = () [] from CM Roman, scaled 1042
\installfont{zplmr7t}
	{pplr8r,nokernum,fplmr,latin,
	unsetpl4cm,kernoff,cmr10 scaled 1042}
	{OT1}{OT1}{zplm}{m}{n}{}
% The `letters' font:
%		greek and partialdiff from Pazo
%		latin from Palatino Italic
%		dotless j from Pazo
%		comma and period from Palatino Roman
%		everything else from CM Math Italic, scaled 1042
\installfont{zplmr7m}
	{fplmri,kernoff,cmmi10 scaled 1042,kernon,
	unsetalf,pplri8r,fplmri,unsetpunct,
	unsetnum,unsetosf,pplr8r,resetosf,nokernum,haxzplmr}
	{OML}{OML}{zplm}{m}{it}{}
% The `symbols' font:
%		section, dagger, daggerdbl and paragraph from Palatino Roman
%		infinity, proportional and emptysetstress from Pazo
%		everything else from CM Symbol, scaled 1042
\installfont{zplmr7y}
	{cmsy10 scaled 1042,unsetcm4pl,pplr8r,fplmr,omsnames}
	{OMS}{OMS}{zplm}{m}{n}{}
% The `large symbols':
%  delimiters and roots from cmex10
%  \sum, \prod, and \coprod from Pazo
%  big operators from cmex10, scaled 900
%  except for integraltext and contintegraltext, scaled 1042
\installfont{zplmr7v}
	{fplmr,zplmsum,cmex10,zplmbgop,cmex10 scaled 900,
	unsetint,cmex10 scaled 1042}
	{OMX}{OMX}{zplm}{m}{n}{}
% The `operators' font, bold:
\installfont{zplmb7t}
	{pplb8r,fplmb,nokernum,latin,
	unsetpl4cm,kernoff,cmbx10 scaled 1042}
	{OT1}{OT1}{zplm}{b}{n}{}
% The `letters' font, bold:
\installfont{zplmb7m}
	{fplmbi,kernoff,cmmib10 scaled 1042,kernon,
	unsetalf,pplbi8r,fplmbi,unsetpunct,
	unsetnum,unsetosf,pplb8r,resetosf,nokernum,haxzplmb}
	{OML}{OML}{zplm}{b}{it}{}
% The `symbols' font, bold:
\installfont{zplmb7y}
	{cmbsy10 scaled 1042,unsetcm4pl,pplb8r,fplmb,omsnames}
	{OMS}{OMS}{zplm}{b}{n}{}
% (no bold `large symbols')
\endinstallfonts
%
% Partial blackboard bold from Pazo
\installfonts
\installfamily{U}{fplmbb}{}
\installrawfont{fplmbb}
	{fplmbb}
	{ot1}{U}{fplmbb}{m}{n}{}
\endinstallfonts
\endrecordtransforms
%
% Write map files
\input finstmsc.sty
\AssumeMetafont % Ignore entries for CM
\resetstr{PSfontsuffix}{.pfb}
\adddriver{dvips}{pazoppl.map}
\input mapppl.tex
\input mapfplm.tex
\input mapzplm.tex
\donedrivers
\adddriver{dvips}{pazoupl.map}
\storemapdata{pplr8a}{\fromafm{uplr8a}{URWPalladioL-Roma}}{\reencodefont{8r}}
\storemapdata{pplri8a}{\fromafm{uplri8a}{URWPalladioL-Ital}}{\reencodefont{8r}}
\storemapdata{pplb8a}{\fromafm{uplb8a}{URWPalladioL-Bold}}{\reencodefont{8r}}
\storemapdata{pplbi8a}{\fromafm{uplbi8a}{URWPalladioL-BoldItal}}{\reencodefont{8r}}
\input mapfplm.tex
\input mapzplm.tex
\donedrivers
\adddriver{dvips}{pazo.map}
\input mapfplm.tex
\makemapentry{fplmr}
\makemapentry{fplmri}
\makemapentry{fplmb}
\makemapentry{fplmbi}
\makemapentry{fplmbb}
\donedrivers
%
\bye
